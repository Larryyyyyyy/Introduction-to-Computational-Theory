# 每天早起背十遍证明步骤

## 停机问题

考虑如下判定问题：
$$
\text{UC}(\alpha)=\begin{cases}0,&若\mathbb M_\alpha(\alpha)=1\\1,&若\mathbb M_\alpha(\alpha)\ne1 (包括\mathbb M_\alpha(\alpha)不会停机)\end{cases}
$$
假定$\text{UC}$可由$\mathbb{UC}$判定，就有$\mathbb{UC}(\llcorner\mathbb{UC}\lrcorner)=0$当且仅当$\mathbb{UC}(\llcorner\mathbb{UC}\lrcorner)=1$，矛盾。

---

定义函数
$$
\text H(\alpha,x)=\begin{cases}1,&若\mathbb M_\alpha(x)\downarrow\\0,&若\mathbb M_\alpha(x)\uparrow\end{cases}
$$
如果$\text H$是可计算的，那么我们可以判定任一问题对于任意输入是否会停机。

假设$\mathbb M$可以计算$\text{H}$，那么对于任意$\alpha$，都有
$$
\mathbb M(\alpha,\alpha)=\text H(\alpha,\alpha)=\begin{cases}1,&若\mathbb M_\alpha(\alpha)\downarrow\\0,&若\mathbb M_\alpha(\alpha)\uparrow\end{cases}
$$
那么存在图灵机$\mathbb N$可以判定$\text{UC}$
$$
\mathbb N(\alpha)=\begin{cases}0,&若\mathbb M(\alpha,\alpha)=1且\mathbb M_\alpha(\alpha)=1\\1,&\text{else}\end{cases}
$$
矛盾。

也就是**停机问题**不可判定。

## 线性加速定理

> [!note]
>
> **定理1.6（线性加速）**：设图灵机$\mathbb M$在$T(n)$步内判定$L$。对任意$\epsilon>0$，存在图灵机$\mathbb M'$，$\mathbb M'$能在$\epsilon T(n)+n+2$步内判定$L$。

我们试构造$\mathbb M'$：

- $\mathbb M'$用$n+2$步将输入转换成长度为$\frac{n}{m}$的内部符号串（作一个长度为$m$的符号串到长度为$1$的符号串映射），第$i$个内部符号串对应$\mathbb M$的第$i$个分块。
- $\mathbb M'$用$\frac{n}{m}$步移动读写头回第$0$格。
- 模拟$\mathbb M$的$m$步计算：
  $\mathbb M$的$m$步计算只有可能触及块$i$和块$i-1$和块$i+1$，且读写头的最终位置也只可能在块$i$和块$i-1$和块$i+1$。$\mathbb M'$，只需要遍历这三个单元格即可，最多的操作数是$5$。

从而$\mathbb M'$的计算时间不超过$n+2+\frac{n}{m}+\frac{5}{m}T(n)\le n+2+\frac{6}{m}T(n)$，令$m=\frac{6}{\epsilon}$即可。

当$T(n)$的增长速度严格大于线性函数时，我们有一个更简洁的加速定理：

> [!note]
>
> **推论1.3**：设$T(n)=\omega(n)$，设图灵机$\mathbb M$在$T(n)$步内判定$L$。对任意$\epsilon >0$，存在图灵机$\mathbb M'$，$\mathbb M'$能在$\epsilon T(n)$步内判定$L$。

## 时间谱系定理

> [!note]
>
> **定理1.8（时间谱系定理）**：若$f$和$g$是时间可构造的且$f(n)\log f(n)=o(g(n))$，则$\bold{TIME}(f(n))\subsetneq\bold{TIME}(g(n))$。

显然$\bold{TIME}f(n)\subset\bold{TIME}(g(n))$。

我们关心的是$\bold{TIME}(g(n))\nsubseteq\bold{TIME}(f(n))$。设$L$由如下定义的图灵机$\mathbb D$判定：

- 当输入$x$时，让$\mathbb U(x,x)$计算$g(|x|)$步；若$\mathbb U(x,x)$在$g(|x|)$步内完成模拟，输出$\mathbb M_x(x)$的反转$\overline{\mathbb M_x(x)}$，否则输出$0$。

此定义中，让$\mathbb U(x,x)$计算$g(|x|)$步指的是：

- 将图灵机$\lambda z.\mathbb U(z,z)$和$g(n)$-时钟图灵机进行硬连接，得到图灵机$\mathbb U_g$，然后计算$\mathbb U_g(x)$。

$L\in\bold{TIME}(g(n))$。假设$L\in\bold{TIME}(f(n))$，且$L$由图灵机$\mathbb M_z$在$f(n)$时间内判定。因为$f(n)\log f(n)=o(g(n))$，所以通用图灵机总能在$f(|z|)\log f(|z|)\le g(|z|)$时间内模拟完$\mathbb M_z(z)$的计算。因此：

- $\mathbb D(z)=\mathbb M_z(z)$，这是因为$\mathbb D$和$\mathbb M_z$都判定语言$L$。
- $\mathbb D(z)=\overline{\mathbb M_z(z)}$，这是因为$\mathbb D(z)$完成了对$\mathbb M_z$的模拟后将其结果反转。

> 这个证明的本质是**定理1.2**，即通用图灵机的极限效率决定了这个严格条件。

## 可达性问题是NL完全问题

非确定对数空间类$\bold{NL}$有个标准的完全问题：
$$
\text{Reachability}=\{\lang G,s,t\rang|有向图G中从s到t有一条路径\}
$$

> [!note]
>
> **定理1.14（可达性问题的复杂性）**：Reachability是$NL$-完全的。

设输入图有$n$个结点。从$s$出发，从当前结点$v$猜测一个邻居然后释放$v$所占用的空间，重复$n-1$次，看是否到达$t$。结点的长度是对数的，控制猜测次数的计数器（路径长度）也是对数的，所以Reachability在$\bold{NL}$中。

> 编码$n$个结点需要$\log(n)$位。
>
> 1.16中提到结点个数不会超过$2^{O(S(n))}$，因此$T(n)\le \text{结点个数}\le 2^{O(S(n))}$。
>
> 对于$\mathbf{NL}$类（对数空间$S(n) = O(\log n)$）。
>
> 所以$T(n)\le O(n)$，记录步数的计数器就是对数的。

## 对数空间规约可传递性

引入一个比较问题的空间复杂性的方法：我们需要满足如下性质的**归约**：若$C$在空间复杂性类$\bold K$中并且$B$可归约到$C$，则$B$也在$\bold K$中。为此引入下述定义：

> [!note]
>
> **定义1.21**：若下述条件满足，称$f:\{0,1\}^*\to\{0,1\}^*$为**隐式对数空间可计算**：
>
> 1. $\exist c.\forall x.|f(x)|\le c|x|^c$。
> 2. $\{\lang x,i\rang|i\le|f(x)|\}\in\bold L$。
> 3. $\{\lang x,i\rang|f(x)_i=1\}\in\bold L$。

在输入$x$后，隐式对数空间可计算函数$f$的输出长度有个多项式的界，这就是**条件一**。

> 如果输出长度是指数级的（例如$2^n$），那么要表示输出结果的下标就需要$O(n)$的空间。

如果我们能判定$i \le |f(x)|$，我们就可以通过对$i$进行二分查找（在$0$到$c|x|^c$之间），精确地找到$|f(x)|$的值，这就是**条件二**。

给定输入$x$和下标$i$，我们要能在对数空间内计算出$f(x)$的第$i$个比特是$0$还是$1$，这就是**条件三**。

> [!note]
>
> **定义1.22**：问题$B$可**对数空间归约**到问题$C$，记为$B\le_L C$，若存在隐式对数空间可计算的从$B$到$C$的归约。

若$B\le_LC$，我们可推出结论说**$B$的空间复杂性不超过$C$的空间复杂性**或**$C$的空间复杂性至少与$B$的空间复杂性一样**，那么对数空间归约应当是传递的。

> [!note]
>
> **引理1.7**：若$B\le_LC$和$C\le_LD$，则有$B\le_LD$。

设$f:B\to C$和$g:C\to D$为隐式对数空间可计算函数。从$B$到$D$的隐式对数空间可计算函数定义为：**输入$x$，计算$f(x)$，再计算$g(f(x))$**。

依赖**定义1.21**：

如果$\mathbb{M}_1$计算 $f(x)$，$\mathbb{M}_2$计算 $g(y)$。

在对数空间下，不能简单地先运行$\mathbb{M}_1$把$f(x)$写满输出带，再让$\mathbb{M}_2$读。因为$f(x)$的长度可能是多项式级的。

隐式计算的解决方案是把$f(x)$当作一个虚拟输入。

- 当$\mathbb{M}_2$需要读$f(x)$的第$i$位时，它暂停，调用$\mathbb{M}_1$的“按位计算”子程序（**条件三**）。
- $\mathbb{M}_1$算完第$i$位后把结果（$0$或$1$）传回给$\mathbb{M}_2$。
- 这样，我们就不需要存储完整的$f(x)$，从而保证了整个复合过程仍然在对数空间$\mathbf{L}$内。

## 高效可验证性

> [!note]
>
> **定理2.1（高效可验证性）**：语言$L\subseteq\{0,1\}^*$在$\bold{NP}$中当且仅当存在多项式$p:\N \to\N$和多项式时间图灵机$\mathbb M$满足：对任意$x\in\{0,1\}^*$，下述等价关系成立：
> $$
> x\in L当且仅当\exist u\in\{0,1\}^{p(|x|)}.\mathbb M(x,u)=1
> $$
> 称$\mathbb M$为$L$的验证器。若$x$和$u$满足$|u|=p(|x|)$和$\mathbb M(x,u)=1$，称$u$为$x\in L$的**证书**（或**证明**）。

设非确定图灵机$\mathbb N$在多项式时间$p(n)$接受$L$。假定对任意输入串$x$，$\mathbb N(x)$的所有计算路径长度均为$p(|x|)$。$\mathbb M$作为$L$的验证器。一台非确定图灵机可以在多项式时间猜测一个长度为$p(|x|)$的证书$u$，然后计算$\mathbb M(x,u)$，这个$u$代表$\mathbb N$对迁移函数的选择。

# 每天早起完成一个归约

## Gemini的做法(仅供参考)

**无向图哈密顿回路问题（Undirected Hamiltonian Cycle, UHC）** 如何**多项式时间归约**到 **布尔可满足性问题（SAT）**。

### 归约目标

\text{图 } G \text{ 包含哈密顿回路} \iff \text{布尔公式 } \psi_G \text{ 是可满足的}给定一个无向图 $G=(V, E)$，构造一个布尔公式 $\psi_G$，使得：
$$
\text{图 } G \text{ 包含哈密顿回路} \Leftrightarrow \text{布尔公式 } \psi_G \text{ 是可满足的}
$$

### 1.变量定义

图$G$有$n$个顶点$|V|=n$。哈密顿回路是一条经过每个顶点**恰好一次**的循环路径。因此，回路中的顶点占据了$n$个位置（或时间步）。

我们定义$n^2$个布尔变量$x_{i, j}$：

- **变量$x_{i, j}$：**$1 \le i \le n$ (顶点序号),$1 \le j \le n$ (回路位置/时间步)。
- **含义：**$x_{i, j}$为$\mathbf{True}$当且仅当**顶点$i$位于哈密顿回路的第$j$个位置**。

### 2.构造布尔公式$\psi_G$

公式$\psi_G$由四个主要的合取子句（约束条件）组成：
$$
\psi_G = C_{\text{位置唯一}} \land C_{\text{顶点遍历}} \land C_{\text{路径连接}} \land C_{\text{循环约束}}
$$

#### 约束A：每个位置只有一个顶点($C_{位置唯一}$)

在回路的每个位置$j$，只能有一个顶点$i$占据该位置：
$$
C_{\text{位置唯一}} = \bigwedge_{j=1}^{n} \left[ \left(\bigvee_{i=1}^{n} x_{i, j}\right) \land \bigwedge_{1 \le i < k \le n} (\neg x_{i, j} \lor \neg x_{k, j}) \right]

-
$$

- **第一部分($\bigvee x_{i, j}$):** 确保位置$j$**至少被一个**顶点占据。
- **第二部分($\neg x_{i, j} \lor \neg x_{k, j}$):** 确保位置$j$**最多被一个**顶点占据（即$i$和$k$不能同时为真）。

#### 约束B：每个顶点只被遍历一次($C_{顶点遍历}$)

每个顶点$i$必须在回路中占据**恰好一个**位置$j$。
$$
C_{\text{顶点遍历}} = \bigwedge_{i=1}^{n} \left[ \left(\bigvee_{j=1}^{n} x_{i, j}\right) \land \bigwedge_{1 \le j < l \le n} (\neg x_{i, j} \lor \neg x_{i, l}) \right]
$$
这与约束A的结构对称，确保每个顶点只在回路中出现一次。

#### 约束C：路径必须是图中的边($C_{路径连接}$)

从回路位置$j$到位置$j+1$的连接，必须对应图$G$中存在的一条边。
$$
C_{\text{路径连接}} = \bigwedge_{j=1}^{n-1} \bigwedge_{i=1}^{n} \bigwedge_{k=1}^{n} \left[ (x_{i, j} \land x_{k, j+1}) \implies \text{Edge}(i, k) \right]
$$
其中$\text{Edge}(i, k)$是一个布尔常量，如果$(i, k) \in E$，则为$\mathbf{True}$，否则为$\mathbf{False}$。

- **转换为CNF(合取范式)：**$A \land B \implies C$等价于$\neg (A \land B) \lor C$，即$\neg A \lor \neg B \lor C$。
- 如果$(i, k) \notin E$，那么子句为$\neg x_{i, j} \lor \neg x_{k, j+1} \lor \mathbf{False}$，即$\neg x_{i, j} \lor \neg x_{k, j+1}$。这**禁止**了从顶点$i$到顶点$k$的路径。
- 如果$(i, k) \in E$，那么子句为$\neg x_{i, j} \lor \neg x_{k, j+1} \lor \mathbf{True}$，这总是$\mathbf{True}$，不施加约束。

#### 约束D：回路必须闭合($C_{循环约束}$)

路径必须从第$n$个位置返回到第$1$个位置，形成一个循环。
$$
C_{\text{循环约束}} = \bigwedge_{i=1}^{n} \bigwedge_{k=1}^{n} \left[ (x_{i, n} \land x_{k, 1}) \implies \text{Edge}(i, k) \right]
$$
这与$C_{\text{路径连接}}$类似，只是连接了位置$n$和位置$1$。

### 3.归约分析

- **正确性：**如果$G$有哈密顿回路，其路径上的顶点赋值为$\mathbf{True}$将满足$\psi_G$。反之，如果$\psi_G$可满足，则满足赋值给出了$G$ 中的一个哈密顿回路。
- **效率：**
  - 变量数量是$n^2$（多项式）。
  - 子句数量：$C_{\text{位置唯一}}$和$C_{\text{顶点遍历}}$的子句数量是$O(n \cdot n^2) = O(n^3)$。$C_{\text{路径连接}}$和$C_{\text{循环约束}}$的子句数量是$O(n^2 \cdot n^2) = O(n^4)$。
  - **总子句数和总长度是关于$n$的多项式**($O(n^4)$)。

因此，这是一个**多项式时间归约**，证明了UHC是$\mathbf{NP}$-完全的。

# 每天早起随机抽查一个概念

1. 背诵**定义1.1**（图灵机的定义）。
2. 解释什么是一条$k$带图灵机的**格局**。
3. 解释**判定问题**和**语言**。
4. 背诵$T(n)$是**时间可构造**需要满足的条件。
5. 回答**通用图灵机**$\mathbb U$模拟时间函数为$T(n)$的图灵机$\mathbb M_\alpha(x)$，将在多少步内停机。
6. 阐释你对**加速定理**的理解。
7. 背诵**非确定图灵机**的概念。
8. 以$\subseteq$关系排序$\bold P,\bold{NP},\bold{EXP},\bold{NEXP}$，并解释你排序的依据。
9. 背诵**快照**的定义。
10. 背诵**神谕图灵机**的概念。
11. 解释定义**复杂性类$\bold B$对复杂性类$\bold A$是低的**。
12. 背诵**三大归约**（图灵归约，卡普归约，库克规约）的定义。
13. 背诵$S(n)$是**空间可构造**需要满足的条件。
14. 阐释你对**格局图**的理解。
15. 背诵**隐式对数空间可计算**的定义。
16. 阐释你对**我们已经无奈地接受了一个事实，在多项式空间类博弈中，人类是玩不过多项式空间图灵机的**的理解。
17. 背诵**QBF**问题的定义，并解释它可以在**线性空间**判定。
18. 背诵**证书**的定义。
19. 阐释你对**$\bold{P}$,$\bold{NP}$问题和$\bold{NPC}$问题**定义的理解。
20. 背诵**多项式同构**的定义。
21. 背诵**稠密**和**稀疏**的定义。

























